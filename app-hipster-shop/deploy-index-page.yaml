apiVersion: apps/v1                                                                                                                                               
kind: Deployment                                                                                                                                                  
metadata:                                                                                                                                                         
  annotations:                                                                                                                                                    
  labels:                                                                                                                                                         
    app: dark-index-page                                                                                                                                         
  name: dark-index-page                                                                                                                                          
  namespace: default                                                                                                                                              
spec:                                                                                                                                                             
  progressDeadlineSeconds: 600                                                                                                                                    
  replicas: 1                                                                                                                                                     
  selector:                                                                                                                                                       
    matchLabels:                                                                                                                                                  
      app: dark-index-page                                                                                                                                       
  strategy:                                                                                                                                                       
    rollingUpdate:                                                                                                                                                
      maxSurge: 25%                                                                                                                                               
      maxUnavailable: 25%                                                                                                                                         
    type: RollingUpdate                                                                                                                                           
  template:                                                                                                                                                       
    metadata:                                                                                                                                                     
      labels:                                                                                                                                                     
        app: dark-index-page                                                                                                                                     
    spec:                                            
      volumes:
      - name: default-website
        configMap:
          name: dark-index-page                                                                                                       
      containers:                                                                                                                                                 
      - image: nginx                                                                                                                                              
        imagePullPolicy: Always                                                                                                                                   
        name: nginx                                                                                                                                               
        resources: {}                                                                                                                                             
        terminationMessagePath: /dev/termination-log                                                                                                              
        terminationMessagePolicy: File      
        volumeMounts:
        - name: default-website
          mountPath: /usr/share/nginx/html                                                                                       
      dnsPolicy: ClusterFirst                                                                                                                                     
      restartPolicy: Always                                                                                                                                       
      schedulerName: default-scheduler                                                                                                                            
      securityContext: {}                                                                                                                                         
      terminationGracePeriodSeconds: 30
---
apiVersion: v1                                                                                                          
kind: Service                                                                                                           
metadata:                                                                                                               
  labels:                                                                                                               
    app: dark-index-page                                                                                               
  name: dark-index-page                                                                                                
  namespace: default                                                                                                    
spec:                                                                                                                
  internalTrafficPolicy: Cluster                                                                                        
  ipFamilies:                                                                                                           
  - IPv4                                                                                                                
  ipFamilyPolicy: SingleStack                                                                                           
  ports:                                                                                                                
  - port: 8080                                                                                                          
    protocol: TCP                                                                                                       
    targetPort: 80                                                                                                      
  selector:                                                                                                             
    app: dark-index-page                                                                                               
  sessionAffinity: None                                                                                                 
  type: ClusterIP